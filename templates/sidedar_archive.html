{% set posts = site.query('/blog').include_hidden(false).all() %}
{% if posts %}
  {% set new_month = '' %}
  {# create a dict or it will not work #}
  {% set x = {1:2} %}
<ul>
  {% for post in posts %}
    {% set this_month = post.pub_date.strftime('%B %Y') %}
    {% if not x[this_month] %}
      {% set this_month_count = 0 %}
    {% else %}
      {% set this_month_count = x[this_month]%}
    {% endif %}
    {% set this_month_count = this_month_count + 1%}
    {# Silly way to update a dict #}
    {% set _dummy = x.update({this_month:this_month_count}) %}
    {# Check if the month has changed? #}
    {% if this_month != new_month %}
      {# Skip the blank first month #}
      {% if x[new_month] %}
        <li>{{ new_month }}({{x[new_month]}})</li>
      {% endif %}
      {% set new_month =  this_month %}
    {% endif %}

  {% endfor %}
</ul>
{% endif %}